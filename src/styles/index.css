@tailwind base;
@tailwind components;
@tailwind utilities;

/* Light Mode: White bg (#FFFFFF), Dark grey text (#333333) */
:root {
  --bg: 255 255 255;      /* #FFFFFF */
  --fg: 51 51 51;         /* #333333 */
  --muted: 102 102 102;   /* softer grey for secondary text */
  --card: 255 255 255;    /* white cards */
  --border: 229 231 235;  /* light border */
  --ring: 22 163 74;      /* keep ring green */
  --brand: 22 163 74;     /* primary green */
  --brand2: 5 150 105;    /* teal-green accent */
  --danger: 220 38 38;
  --warning: 245 158 11;
}

/* Dark Mode: Deep Charcoal bg (#121212), Light Mint highlights (#98FF98) */
.dark {
  --bg: 18 18 18;         /* #121212 */
  --fg: 238 238 238;      /* readable light text */
  --muted: 170 170 170;   /* muted text */
  --card: 26 26 26;       /* slightly lighter than bg */
  --border: 45 45 45;     /* subtle border */
  --ring: 152 255 152;    /* #98FF98 mint ring */

  /* Mint highlights */
  --brand: 152 255 152;   /* #98FF98 */
  --brand2: 120 255 200;  /* mint-teal secondary */

  --danger: 248 113 113;
  --warning: 251 191 36;
}

html,
body {
  height: 100%;
}

/* ✅ Smooth theme switching across the whole UI */
html,
body,
* {
  transition:
    background-color 200ms ease,
    color 200ms ease,
    border-color 200ms ease,
    box-shadow 200ms ease,
    fill 200ms ease,
    stroke 200ms ease;
}

/* ✅ Optional: prevent transition flash on first load
   Add/remove 'preload' class in main.jsx (snippet below) */
.preload,
.preload * {
  transition: none !important;
}

body {
  background: rgb(var(--bg));
  color: rgb(var(--fg));
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

* {
  border-color: rgb(var(--border));
}

::selection {
  background: rgba(var(--brand), 0.25);
}

/* Subtle animated feel without heavy JS */
@media (prefers-reduced-motion: no-preference) {
  .hover-lift {
    transition: transform 180ms ease, box-shadow 180ms ease;
  }
  .hover-lift:hover {
    transform: translateY(-2px);
  }
}

@layer utilities {
  .bg-app {
    background-color: rgb(var(--bg));
    background-image:
      radial-gradient(700px circle at 12% 8%, rgba(var(--brand), 0.14), transparent 48%),
      radial-gradient(800px circle at 88% 14%, rgba(var(--brand2), 0.10), transparent 55%);
    background-attachment: fixed;
  }
  .text-app { color: rgb(var(--fg)); }
  .text-muted { color: rgb(var(--muted)); }
  .bg-card { background-color: rgb(var(--card)); }
  .border-app { border-color: rgb(var(--border)); }
  .ring-brand { --tw-ring-color: rgb(var(--ring)); }
  .brand-gradient {
    background-image: linear-gradient(135deg, rgba(var(--brand), 0.16), rgba(var(--brand2), 0.12));
  }
}

/* -------------------------------------------------------
   Leaflet: keep map UNDER sticky/fixed navbar on scroll
   ------------------------------------------------------- */
.leaflet-container {
  position: relative;
  z-index: 0 !important;
}

.leaflet-pane,
.leaflet-top,
.leaflet-bottom {
  z-index: 0 !important;
}

.leaflet-popup,
.leaflet-tooltip {
  z-index: 10 !important;
}

/* Emergency border pulse (gentle blinking) */
@keyframes emergencyBorderPulse {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(var(--danger), 0.0);
    border-color: rgba(var(--danger), 0.35);
  }
  50% {
    box-shadow: 0 0 0 6px rgba(var(--danger), 0.18);
    border-color: rgba(var(--danger), 0.85);
  }
}

.emergency-blink {
  animation: emergencyBorderPulse 1.1s ease-in-out infinite;
  border-color: rgba(var(--danger), 0.6) !important;
}

@media (prefers-reduced-motion: reduce) {
  .emergency-blink {
    animation: none !important;
    box-shadow: none !important;
  }
}
